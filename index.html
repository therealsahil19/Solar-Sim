<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Solar System</title>
    <style>
        /* Design System Tokens */
        :root {
            /* Colors */
            --color-bg: #000000;
            --color-text-primary: #ffffff;
            --color-text-secondary: #cccccc;
            --color-text-muted: #aaaaaa;
            --color-accent: #4a90e2;
            --color-accent-hover: #357abd;
            --color-accent-transparent: rgba(74, 144, 226, 0.6);
            --color-surface-translucent: rgba(10, 10, 16, 0.85);
            --color-surface-dim: rgba(0, 0, 0, 0.6);
            --color-border: rgba(255, 255, 255, 0.2);
            --color-border-faint: rgba(255, 255, 255, 0.1);
            --color-loading-track: #333333;

            /* Spacing */
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;

            /* Radii */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 20px;
            --radius-full: 9999px;

            /* Z-Indices */
            --z-ui: 10;
            --z-toast: 20;
            --z-loader: 9999;

            /* Typography */
            --font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            --font-size-xs: 0.8rem;
            --font-size-sm: 0.9rem;
            --font-size-md: 1rem;
            --font-size-lg: 1.2rem;
        }

        body { margin: 0; overflow: hidden; background-color: var(--color-bg); font-family: var(--font-family); }
        canvas { display: block; }

        /* UI Layer */
        #ui-layer {
            position: absolute; top: var(--space-md); left: var(--space-md);
            color: var(--color-text-primary); opacity: 0.8;
            pointer-events: none; user-select: none;
            z-index: var(--z-ui);
        }

        .key {
            border: 1px solid var(--color-border);
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            background: var(--color-border-faint);
        }

        #toast {
            position: absolute; bottom: 5rem; left: 50%; transform: translateX(-50%);
            background: var(--color-surface-dim); color: var(--color-text-primary);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-lg);
            opacity: 0; transition: opacity 0.3s; pointer-events: none;
            z-index: var(--z-toast);
        }
        #toast.visible { opacity: 1; }

        #onboarding-hint {
            position: absolute; left: 50%; bottom: 12%; transform: translateX(-50%);
            background: var(--color-surface-dim);
            color: var(--color-text-primary);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-full);
            font-size: 0.95rem; text-align: center;
            opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            pointer-events: none; user-select: none;
            z-index: var(--z-toast);
        }
        #onboarding-hint.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
        #onboarding-hint.hidden { opacity: 0; transform: translateX(-50%) translateY(8px); }

        /* Loading Screen */
        #loading-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--color-bg);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            color: var(--color-text-primary);
            z-index: var(--z-loader);
            transition: opacity 0.5s;
        }
        #loading-bar-container {
            width: 200px; height: 10px;
            background: var(--color-loading-track);
            margin-top: var(--space-md);
            border-radius: var(--radius-sm); overflow: hidden;
        }
        #loading-bar {
            width: 0%; height: 100%;
            background: var(--color-accent);
            transition: width 0.2s;
        }

        /* Palette's UX Addition: Camera & Texture Buttons */
        .icon-btn {
            background: var(--color-border-faint);
            border: 1px solid var(--color-border);
            color: var(--color-text-primary);
            border-radius: 50%;
            width: 44px; height: 44px;
            cursor: pointer;
            font-size: var(--font-size-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s, transform 0.1s;
            pointer-events: auto;
            margin-top: 0.75rem;
        }
        .icon-btn:hover {
            background: var(--color-border);
        }
        .icon-btn:active {
            transform: scale(0.95);
        }
        .icon-btn:focus-visible {
            outline: 2px solid var(--color-accent);
            outline-offset: 2px;
        }

        /* Active/Inactive States */
        .icon-btn[aria-pressed="true"] {
            background: var(--color-accent-transparent);
            border-color: var(--color-accent);
            opacity: 1;
        }
        .icon-btn[aria-pressed="false"] {
            opacity: 0.5;
        }

        .texture-toggle {
            font-size: var(--font-size-sm);
            border-radius: var(--radius-md);
            width: auto;
            padding: 0 10px;
        }

        /* Planet Labels (CSS2D) */
        .planet-label {
            color: var(--color-text-primary);
            font-family: sans-serif;
            padding: 2px 5px;
            background: rgba(0, 0, 0, 0.4); /* Keeping this for label readability on 3D bg */
            border-radius: var(--radius-sm);
            font-size: 12px;
            pointer-events: none;
            user-select: none;
            text-shadow: 0 0 2px black;
            margin-top: -20px;
        }

        /* Info Panel */
        #info-panel {
            position: absolute;
            top: var(--space-xl);
            right: var(--space-xl);
            width: 250px;
            background: var(--color-surface-translucent);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            color: var(--color-text-primary);
            display: none;
            pointer-events: auto;
            backdrop-filter: blur(4px);
        }
        #info-panel h2 { margin: 0 0 var(--space-sm) 0; font-size: var(--font-size-lg); }
        #info-panel p { font-size: var(--font-size-sm); line-height: 1.4; color: var(--color-text-secondary); margin-bottom: var(--space-sm); }
        #info-panel .stats {
            font-size: 0.85rem;
            margin-top: var(--space-md);
            border-top: 1px solid var(--color-border-faint);
            padding-top: var(--space-sm);
        }
        #info-panel .stats div { margin-bottom: 0.25rem; }

        #btn-follow {
            margin-top: var(--space-md);
            width: 100%;
            background: var(--color-accent);
            color: var(--color-text-primary);
            border: none;
            padding: var(--space-sm);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: bold;
        }
        #btn-follow:hover { background: var(--color-accent-hover); }

        /* Time Controls */
        #time-controls {
            position: absolute;
            bottom: var(--space-xl);
            left: var(--space-xl);
            background: var(--color-surface-translucent);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            pointer-events: auto;
            backdrop-filter: blur(2px);
            border: 1px solid var(--color-border-faint);
        }
        #time-controls button {
            background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer;
            display: flex; align-items: center;
        }
        #slider-speed {
            width: 100px;
            cursor: pointer;
        }

    </style>
</head>
<body>
    <div id="loading-screen">
        <h2>Loading Solar System...</h2>
        <div id="loading-bar-container"><div id="loading-bar" role="progressbar" aria-label="Loading assets" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div></div>
    </div>

    <div id="ui-layer">
        <h1 style="margin: 0 0 0.5rem 0; font-size: 1.2rem;">Interactive 3D Solar System</h1>
        <div style="font-size: 0.9rem; line-height: 1.5;">
            <div>Drag to rotate ‚Ä¢ Scroll to zoom ‚Ä¢ <span class="key">Space</span>: pause</div>
        </div>
        <!-- Accessible button for screen readers and mouse interaction -->
        <button id="btn-camera" class="icon-btn" aria-label="Toggle Camera View" aria-pressed="false" title="Toggle Camera View (C)" aria-keyshortcuts="c">
            üé•
        </button>
        <button id="btn-reset" class="icon-btn" aria-label="Reset View" title="Reset View (Esc)" aria-keyshortcuts="Escape">
            ‚Ü∫
        </button>
        <button id="btn-texture" class="icon-btn texture-toggle" aria-label="Toggle Textures" aria-pressed="true" title="Toggle Textures (T)" aria-keyshortcuts="t">
            HD
        </button>
        <button id="btn-labels" class="icon-btn" aria-label="Toggle Labels" aria-pressed="true" title="Toggle Labels (L)" aria-keyshortcuts="l">
            üè∑Ô∏è
        </button>
        <button id="btn-orbits" class="icon-btn" aria-label="Toggle Orbits" aria-pressed="true" title="Toggle Orbits (O)" aria-keyshortcuts="o">
            ‚ö™
        </button>
    </div>

    <div id="time-controls">
        <button id="btn-pause" title="Pause/Play" aria-label="Pause Simulation">‚è∏</button>
        <div style="display: flex; flex-direction: column; font-size: 0.8rem; color: var(--color-text-secondary);">
            <div style="display: flex; justify-content: space-between; width: 100px;">
                <label for="slider-speed" style="margin-bottom: 2px;">Speed</label>
                <span id="speed-value" style="font-size: 0.8rem; opacity: 0.8;">1.0x</span>
            </div>
            <input type="range" id="slider-speed" min="0.1" max="5.0" step="0.1" value="1.0" aria-valuemin="0.1" aria-valuemax="5.0" aria-valuenow="1.0" aria-valuetext="1.0x">
        </div>
    </div>

    <div id="info-panel">
        <h2 id="info-name">Planet Name</h2>
        <div id="info-type" style="font-style: italic; color: var(--color-text-muted); margin-bottom: 0.5rem;">Type</div>
        <p id="info-desc">Description goes here.</p>
        <div class="stats">
            <div id="info-radius">Radius: -</div>
            <div id="info-distance">Distance: -</div>
            <div id="info-dist-sun">Dist to Sun: -</div>
        </div>
        <button id="btn-follow">Follow</button>
    </div>

    <div id="toast" role="status" aria-live="polite"></div>
    <div id="onboarding-hint">Drag to rotate ‚Ä¢ Scroll to zoom ‚Ä¢ Press C for ship view ‚Ä¢ Click a planet for info</div>

    <div style="position: absolute; bottom: 1rem; right: 1rem; color: rgba(255,255,255,0.6); font-size: 0.8rem; pointer-events: none;">
        Solar-Sim ¬∑ Built with Three.js ¬∑ <a href="https://github.com/therealsahil19/Solar-Sim" target="_blank" rel="noopener noreferrer" style="color: rgba(255,255,255,0.8); pointer-events: auto;">GitHub</a>
    </div>

    <!-- Import Map to allow bare module imports for Three.js -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <script type="module" src="src/main.js"></script>
</body>
</html>
